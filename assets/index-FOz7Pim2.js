import{r as N,j as e,c as Z,I as _,R as D}from"./radix-vendor-Bm1U9n1d.js";import{L as I,S as B,a as $,b as G,c as O,d as U,B as v,e as Q,A as R,f as F,g as M,T as E,h as L,i as ee,j as ae,k as se}from"./separator-D7K8ijzx.js";import{c as te,C as u,a as h,b as p,d as j,e as C,T as re,f as ne,g as A,h as P}from"./index-fzXkn5uR.js";import{A as le,D as ce,C as V,a as J,L as K,b as W,c as oe,d as q,G as X,S as ie,R as de,Z as ge}from"./lucide-vendor-OWB9XKaj.js";import{a as y}from"./ui-vendor-DnnLs78w.js";import"./react-vendor-Bzgz95E1.js";const H=N.forwardRef(({className:a,value:s,...c},n)=>e.jsx(Z,{ref:n,className:te("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...c,children:e.jsx(_,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));H.displayName=Z.displayName;const T=[{code:"en",name:"English",flag:"ðŸ‡¬ðŸ‡§"},{code:"es",name:"Spanish",flag:"ðŸ‡ªðŸ‡¸"},{code:"fr",name:"French",flag:"ðŸ‡«ðŸ‡·"},{code:"de",name:"German",flag:"ðŸ‡©ðŸ‡ª"},{code:"it",name:"Italian",flag:"ðŸ‡®ðŸ‡¹"},{code:"pt",name:"Portuguese",flag:"ðŸ‡µðŸ‡¹"},{code:"ru",name:"Russian",flag:"ðŸ‡·ðŸ‡º"},{code:"zh",name:"Chinese",flag:"ðŸ‡¨ðŸ‡³"},{code:"ja",name:"Japanese",flag:"ðŸ‡¯ðŸ‡µ"},{code:"ko",name:"Korean",flag:"ðŸ‡°ðŸ‡·"},{code:"ar",name:"Arabic",flag:"ðŸ‡¸ðŸ‡¦"},{code:"hi",name:"Hindi",flag:"ðŸ‡®ðŸ‡³"},{code:"nl",name:"Dutch",flag:"ðŸ‡³ðŸ‡±"},{code:"pl",name:"Polish",flag:"ðŸ‡µðŸ‡±"},{code:"tr",name:"Turkish",flag:"ðŸ‡¹ðŸ‡·"},{code:"sv",name:"Swedish",flag:"ðŸ‡¸ðŸ‡ª"}],Y=a=>a?a.split("-")[0].toLowerCase():"",xe=a=>{if(!a)return"Unknown";const s=Y(a),c=T.find(n=>n.code===s);return c?c.name:a},ue=[{lang:"en",text:"Hello! Welcome to the Chrome Translator API demo. This powerful tool allows real-time translation directly in your browser."},{lang:"es",text:"Â¿CÃ³mo estÃ¡s? Este es un texto de ejemplo en espaÃ±ol para demostrar las capacidades de traducciÃ³n."},{lang:"fr",text:"Bonjour! C'est une dÃ©monstration de l'API de traduction Chrome avec traitement local des donnÃ©es."},{lang:"de",text:"Guten Tag! Diese Demonstration zeigt die ÃœbersetzungsfÃ¤higkeiten der Chrome Built-in AI."},{lang:"ja",text:"ã“ã‚“ã«ã¡ã¯ï¼ã“ã‚Œã¯Chromeã®ç¿»è¨³APIãƒ‡ãƒ¢ã§ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§ç›´æŽ¥ç¿»è¨³ãŒå¯èƒ½ã§ã™ã€‚"}],me=({sourceLanguage:a,targetLanguage:s,setSourceLanguage:c,setTargetLanguage:n,streamingMode:l,setStreamingMode:o,isDownloading:x,downloadProgress:m,swapLanguages:f})=>e.jsxs(u,{children:[e.jsx(h,{children:e.jsx(p,{children:"Translation Settings"})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"source-lang",children:"Source Language"}),e.jsxs(B,{value:a,onValueChange:c,children:[e.jsx($,{id:"source-lang",children:e.jsx(G,{})}),e.jsx(O,{children:T.map(t=>e.jsx(U,{value:t.code,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t.flag}),e.jsx("span",{children:t.name})]})},t.code))})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(v,{variant:"outline",size:"icon",onClick:f,className:"rounded-full",children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"target-lang",children:"Target Language"}),e.jsxs(B,{value:s,onValueChange:n,children:[e.jsx($,{id:"target-lang",children:e.jsx(G,{})}),e.jsx(O,{children:T.map(t=>e.jsx(U,{value:t.code,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t.flag}),e.jsx("span",{children:t.name})]})},t.code))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(I,{htmlFor:"streaming-mode",children:"Streaming Translation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"See translation appear word by word in real-time"})]}),e.jsx(Q,{id:"streaming-mode",checked:l,onCheckedChange:o})]}),x&&e.jsxs(R,{children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx(F,{children:"Downloading Language Pack"}),e.jsxs(M,{className:"space-y-2",children:[e.jsxs("p",{children:["Downloading ",a," â†’ ",s," translation model..."]}),e.jsx(H,{value:m,className:"mt-2"}),e.jsxs("p",{className:"text-sm",children:[m.toFixed(0),"% complete"]})]})]})]})]}),he=({inputText:a,setInputText:s,isTranslating:c,streamingMode:n,streamedText:l,translatedText:o,copyToClipboard:x,translateText:m,clearAll:f})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(u,{children:[e.jsx(h,{children:e.jsx(p,{children:"Input Text"})}),e.jsxs(j,{className:"space-y-4",children:[e.jsx(E,{value:a,onChange:t=>s(t.target.value),placeholder:"Enter text to translate...",className:"min-h-[200px]"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.length," characters"]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>x(a),disabled:!a,children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Copy"]})]})]})]}),e.jsxs(u,{children:[e.jsx(h,{children:e.jsx(p,{children:"Translated Text"})}),e.jsxs(j,{className:"space-y-4",children:[e.jsx(E,{value:n&&c?l:o,readOnly:!0,placeholder:"Translation will appear here...",className:"min-h-[200px]"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[o.length," characters"]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>x(o),disabled:!o,children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Copy"]})]})]})]})]}),e.jsx(u,{children:e.jsx(j,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(v,{onClick:m,disabled:c||!a,className:"flex-1",children:c?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Translating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Translate"]})}),e.jsx(v,{variant:"outline",onClick:f,children:"Clear All"})]})})})]}),pe=({onLoadSample:a})=>e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Sample Texts"}),e.jsx(C,{children:"Click to load sample text for testing"})]}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:ue.map((s,c)=>e.jsx(v,{variant:"outline",className:"justify-start text-left h-auto p-3 w-full",onClick:()=>a(s),children:e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:T.find(n=>n.code===s.lang)?.flag}),e.jsx("span",{className:"font-medium",children:T.find(n=>n.code===s.lang)?.name})]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate w-full",children:s.text})]})},c))})})]}),je=({inputText:a,setInputText:s,onDetect:c})=>{const[n,l]=D.useState(!1),[o,x]=D.useState(""),[m,f]=D.useState(0),t=async()=>{if(a){l(!0),x(""),f(0);try{const r=await c(a);r&&(x(r.lang),f(r.conf))}finally{l(!1)}}};return e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Language Detection"}),e.jsx(C,{children:"Automatically detect the language of any text"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsx(E,{value:a,onChange:r=>s(r.target.value),placeholder:"Enter text to detect language...",className:"min-h-[150px]"}),e.jsx(v,{onClick:t,disabled:!a||n,className:"w-full",children:n?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Detecting..."]}):e.jsx(e.Fragment,{children:"Detect Language"})}),o&&e.jsxs(R,{children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx(F,{children:"Language Detected"}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Language:"}),e.jsxs(L,{variant:"outline",children:[T.find(r=>r.code===o)?.flag," ",T.find(r=>r.code===o)?.name||o]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Confidence:"}),e.jsx(H,{value:m*100,className:"flex-1"}),e.jsxs("span",{className:"text-sm",children:[(m*100).toFixed(1),"%"]})]})]})})]})]})]})},fe=({translationHistory:a})=>e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Translation History"}),e.jsx(C,{children:"Recent translations (last 10)"})]}),e.jsx(j,{children:a.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No translations yet. Start translating to see history."}):e.jsx(ee,{className:"h-[500px] pr-4",children:e.jsx("div",{className:"space-y-4",children:a.map((s,c)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"outline",children:[T.find(n=>n.code===s.source)?.flag," ",s.source.toUpperCase()]}),e.jsx(oe,{className:"h-3 w-3"}),e.jsxs(L,{variant:"outline",children:[T.find(n=>n.code===s.target)?.flag," ",s.target.toUpperCase()]})]}),e.jsx("span",{className:"text-muted-foreground",children:new Date(s.timestamp).toLocaleTimeString()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"p-3 bg-gray-50 rounded",children:e.jsx("p",{className:"text-sm",children:s.original})}),e.jsx("div",{className:"p-3 bg-muted rounded",children:e.jsx("p",{className:"text-sm",children:s.translated})})]}),c<a.length-1&&e.jsx(ae,{className:"my-2"})]},c))})})})]}),ye={sourceLanguage:"en",targetLanguage:"es",inputText:"",translatedText:"",streamedText:"",streamingMode:!1,isTranslating:!1,isDownloading:!1,downloadProgress:0,translationHistory:[]};function Ne(a,s){switch(s.type){case"setSourceLanguage":return{...a,sourceLanguage:s.payload};case"setTargetLanguage":return{...a,targetLanguage:s.payload};case"setInputText":return{...a,inputText:s.payload};case"setTranslatedText":return{...a,translatedText:s.payload};case"setStreamedText":return{...a,streamedText:s.payload};case"setStreamingMode":return{...a,streamingMode:s.payload};case"setIsTranslating":return{...a,isTranslating:s.payload};case"setIsDownloading":return{...a,isDownloading:s.payload};case"setDownloadProgress":return{...a,downloadProgress:s.payload};case"addTranslationHistory":return{...a,translationHistory:[s.payload,...a.translationHistory.slice(0,9)]};case"clearTexts":return{...a,inputText:"",translatedText:"",streamedText:""};case"swapLanguages":return{...a,sourceLanguage:a.targetLanguage,targetLanguage:a.sourceLanguage,inputText:a.translatedText,translatedText:a.inputText};default:return a}}const k=Symbol("translatorProgressCleanup");function Te(){const[a,s]=N.useReducer(Ne,ye),c="Translator"in self,n="LanguageDetector"in self,l=N.useRef(null),o=N.useRef(null);N.useEffect(()=>{const r=new AbortController,{signal:i}=r;return(async()=>{if(!(!n||i.aborted))try{const g=await window.LanguageDetector.create();if(i.aborted){try{g.destroy?.()}catch{}return}o.current=g,await o.current.ready}catch(g){i.aborted||console.error("Failed to create language detector:",g)}})(),()=>{if(r.abort(),l.current){l.current[k]?.();try{l.current.destroy()}catch{}}}},[n]);const x=N.useCallback(async()=>{if(!window.Translator)return null;let r=()=>{},i=!1;try{s({type:"setIsDownloading",payload:!0}),s({type:"setDownloadProgress",payload:0});const d=await window.Translator.create({sourceLanguage:a.sourceLanguage,targetLanguage:a.targetLanguage,monitor(g){const w=b=>{const S=b,z=S.total>0?S.loaded/S.total*100:100;s({type:"setDownloadProgress",payload:z}),z>=100&&!i&&(i=!0,s({type:"setIsDownloading",payload:!1}),y.success("Language pack ready!",{description:`${a.sourceLanguage} â†’ ${a.targetLanguage} translation model downloaded successfully.`}))};g.addEventListener("downloadprogress",w),r=()=>g.removeEventListener("downloadprogress",w)}});return d[k]=r,i||s({type:"setIsDownloading",payload:!1}),d}catch(d){return s({type:"setIsDownloading",payload:!1}),console.error("Failed to create translator:",d),y.error("Error creating translator",{description:d instanceof Error?d.message:"Unknown error occurred"}),null}},[a.sourceLanguage,a.targetLanguage]),m=N.useCallback(async()=>{if(!a.inputText.trim()){y.error("No text to translate",{description:"Please enter some text to translate"});return}s({type:"setIsTranslating",payload:!0}),s({type:"setTranslatedText",payload:""}),s({type:"setStreamedText",payload:""});try{if((!l.current||l.current.sourceLanguage!==a.sourceLanguage||l.current.targetLanguage!==a.targetLanguage)&&(l.current&&(l.current[k]?.(),l.current.destroy()),l.current=await x()),!l.current)throw new Error("Failed to create translator");let r="";if(a.streamingMode){const d=l.current.translateStreaming(a.inputText).getReader();let g="";for(;;){const{done:w,value:b}=await d.read();if(w)break;g+=b,s({type:"setStreamedText",payload:g})}s({type:"setTranslatedText",payload:g}),r=g}else{const i=await l.current.translate(a.inputText);s({type:"setTranslatedText",payload:i}),r=i}s({type:"addTranslationHistory",payload:{source:a.sourceLanguage,target:a.targetLanguage,original:a.inputText,translated:r,timestamp:new Date().toISOString()}}),y.success("Translation complete!",{description:`Translated from ${a.sourceLanguage} to ${a.targetLanguage}`})}catch(r){console.error("Translation failed:",r),y.error("Translation failed",{description:r instanceof Error?r.message:"Unknown error occurred"})}finally{s({type:"setIsTranslating",payload:!1})}},[a.inputText,a.streamingMode,a.sourceLanguage,a.targetLanguage,x]),f=N.useCallback(async r=>{if(!o.current||!r)return null;try{const i=await o.current.detect(r);if(i&&i.length>0){const d=i[0],g=d.language||d.detectedLanguage||d.lang,w=Y(g);return w&&s({type:"setSourceLanguage",payload:w}),y.success("Language detected!",{description:`Detected ${xe(g)} with ${(d.confidence*100).toFixed(1)}% confidence`}),{lang:w,conf:d.confidence}}return y.error("Detection failed",{description:"Could not detect language"}),null}catch(i){return y.error("Detection failed",{description:i instanceof Error?i.message:"Could not detect language"}),null}},[]),t=N.useCallback(r=>{navigator.clipboard.writeText(r),y.success("Copied!",{description:"Text copied to clipboard"})},[]);return{state:a,dispatch:s,translateText:m,handleDetectLanguage:f,copyToClipboard:t,hasTranslator:c,hasLanguageDetector:n}}const De=()=>{const{state:a,dispatch:s,translateText:c,handleDetectLanguage:n,copyToClipboard:l,hasTranslator:o,hasLanguageDetector:x}=Te(),m=o,f=t=>{s({type:"setInputText",payload:t.text}),s({type:"setSourceLanguage",payload:t.lang})};return m?e.jsxs("div",{className:"container mx-auto p-4 max-w-7xl",children:[e.jsx(se,{}),e.jsx(u,{className:"mb-6",children:e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-8 w-8 text-foreground"}),e.jsxs("div",{children:[e.jsx(p,{className:"text-2xl",children:"Chrome Translator API Demo"}),e.jsx(C,{children:"On-device translation powered by Chrome's built-in AI"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{variant:o?"default":"secondary",children:["Translator API: ",o?"available":"no"]}),e.jsxs(L,{variant:x?"default":"secondary",children:["Detector API: ",x?"available":"no"]})]})]})})}),e.jsxs(re,{defaultValue:"translate",className:"space-y-4",children:[e.jsxs(ne,{className:"grid w-full grid-cols-3",children:[e.jsxs(A,{value:"translate",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Translate"]}),e.jsxs(A,{value:"detect",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Detect Language"]}),e.jsxs(A,{value:"history",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"History"]})]}),e.jsxs(P,{value:"translate",className:"space-y-4",children:[e.jsx(me,{sourceLanguage:a.sourceLanguage,targetLanguage:a.targetLanguage,setSourceLanguage:t=>s({type:"setSourceLanguage",payload:t}),setTargetLanguage:t=>s({type:"setTargetLanguage",payload:t}),streamingMode:a.streamingMode,setStreamingMode:t=>s({type:"setStreamingMode",payload:t}),isDownloading:a.isDownloading,downloadProgress:a.downloadProgress,swapLanguages:()=>s({type:"swapLanguages"})}),e.jsx(he,{inputText:a.inputText,setInputText:t=>s({type:"setInputText",payload:t}),isTranslating:a.isTranslating,streamingMode:a.streamingMode,streamedText:a.streamedText,translatedText:a.translatedText,copyToClipboard:l,translateText:c,clearAll:()=>s({type:"clearTexts"})}),e.jsx(pe,{onLoadSample:f})]}),e.jsx(P,{value:"detect",className:"space-y-4",children:e.jsx(je,{inputText:a.inputText,setInputText:t=>s({type:"setInputText",payload:t}),onDetect:n})}),e.jsx(P,{value:"history",className:"space-y-4",children:e.jsx(fe,{translationHistory:a.translationHistory})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(p,{className:"text-lg flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-foreground"}),"On-Device Processing"]})}),e.jsx(j,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"All translations happen locally in your browser. No data is sent to external servers."})})]}),e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(p,{className:"text-lg flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Real-Time Translation"]})}),e.jsx(j,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Experience instant translations with streaming mode for longer texts."})})]}),e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(p,{className:"text-lg flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"}),"Privacy First"]})}),e.jsx(j,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your data never leaves your device. Complete privacy and security guaranteed."})})]})]})]}):e.jsxs(u,{className:"max-w-4xl mx-auto mt-10",children:[e.jsx(h,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-6 w-6 text-red-500"}),"Chrome Translator API Not Supported"]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs(R,{variant:"destructive",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(F,{children:"Browser Not Supported"}),e.jsx(M,{children:"The Chrome Translator API requires Chrome 138 or later with the Translation API enabled."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"To enable the Translator API:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Open Chrome Dev or Chrome Canary (version 138+)"}),e.jsxs("li",{children:["Navigate to"," ",e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:"chrome://flags"})]}),e.jsx("li",{children:'Search for "Experimental translation API"'}),e.jsx("li",{children:"Enable the flag and restart Chrome"}),e.jsxs("li",{children:["Visit"," ",e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:"chrome://on-device-translation-internals/"})]}),e.jsx("li",{children:"Install required language packs"})]})]})]})]})};export{De as TranslatorFeatureComponent};
